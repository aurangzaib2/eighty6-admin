<!-- user form --> 
<ng-container *ngIf="restaurantData.id">
    <div class="card profile-card border-0">
        <img src="assets/images/banner.png" class="card-img-top" alt="banner">
        <div class="close-icon" (click)="closeModal()">
            <img src="assets/icons/white-cross.svg" class="img-fluid">
        </div>
        <div class="card-body">
            <div class="mt-4">
                <form [formGroup]="cardForm" (ngSubmit)="onSubmit()" autocomplete="off">
                    <h6 class="text-capitalize"> {{'cardManagement.topupRestaurant' | translate}} </h6>
                    <div class="row mt-2">
                        <!-- <div class="col-6">
                            <div class="form-group">
                                <select class="custom-select custom-select-lg text-capitalize" formControlName="restaurant"
                                    (change)="setCard($event.target.value)">
                                    <option [value]="item.instrumentId" *ngFor="let item of cardsList">Visa********{{item?.last4}}</option>
                                </select>
                                <label for="exampleInput6">{{'cardManagement.selectCard' | translate}}</label>
                                <div class="text-left">
                                    <ng-container
                                        *ngIf="selectedCardIdErrorMessage == true">
                                        <span class="error-message font-14">{{'cardFormErrors.card' | translate}}</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div> -->
                        <div class="col-6">
                            <div class="form-group">
                                <label for="amou">{{'cardManagement.amount' | translate}}</label>
                                <div class="input-group input-group-alternative">
                                    <input type="number" class="form-control"
                                        placeholder="0.00" formControlName="amount"
                                        (input)="setAmount($event.target.value)">
                                </div>
                                <div class="text-left">
                                    <ng-container
                                        *ngIf="amountErrorMessage == true">
                                        <span class="error-message font-14">{{'cardFormErrors.amount' | translate}}</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>


                </form>
                <div class="text-capitalize">
                    <ng-container *ngIf="displayMessage!=null">
                        <span class="error-message font-14">{{displayMessage}}</span>
                    </ng-container>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <button class="btn btn-theme btn-grey text-capitalize" (click)="closeModal()">
                        {{'userManagement.cancel' | translate}}
                    </button>
                    <button type="submit" class="btn btn-theme btn-blue text-capitalize" (click)="onSubmit()">
                        <span class="text-capitalize" *ngIf="!loading && restaurantData">{{'cardManagement.payNow' |
                            translate}}</span>
                        <span class="spinner-border spinner-border-sm" *ngIf="loading" role="status"
                            aria-hidden="true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</ng-container>

<!-- user view -->
<ng-container *ngIf="!restaurantData.id">
    <div class="card profile-card border-0">
        <img src="assets/images/banner.png" class="card-img-top" alt="banner">
        <div class="close-icon" (click)="closeModal()">
            <img src="assets/icons/white-cross.svg" class="img-fluid">
        </div>
        <div class="card-body">
            <div class="mt-4">
                <form [formGroup]="cardForm" (ngSubmit)="onSubmit()" autocomplete="off">
                    <h6 class="text-capitalize"> {{'cardManagement.addNewCard' | translate}} </h6>
                    <div class="row mt-2">
                        <!-- <div class="col-6">
                            <div class="form-group">
                                <select class="custom-select custom-select-lg text-capitalize" formControlName="restaurant"
                                    (change)="setRestaurant($event.target.value)">
                                    <option [value]="item.id" *ngFor="let item of restaurantsList">{{item?.name}}</option>
                                </select>
                                <label for="exampleInput6">{{'cardManagement.selectRestaurant' | translate}}</label>
                                <div class="text-left">
                                    <ng-container
                                        *ngIf="selectedRestaurantIdErrorMessage == true">
                                        <span class="error-message font-14">Please select some restaurant</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div> -->
                        <div class="col-12">
                            <div class="form-group">
                                <label for="cardNumber">{{'cardManagement.cardNumber' | translate}}</label>
                                <div class="input-group input-group-alternative">
                                    <input type="number" class="form-control"
                                        placeholder="****************" formControlName="cardNumber"
                                        (input)="setCardNumber($event.target.value)">
                                </div>
                                <div class="text-left">
                                    <ng-container
                                        *ngIf="cardNumberErrorMessage == true">
                                        <span class="error-message font-14">{{'cardFormErrors.cardNumber' | translate}}</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label for="expiry">{{'cardManagement.expiry' | translate}}</label>
                                <div class="input-group input-group-alternative">
                                    <input type="text" class="form-control" autocomplete="off"
                                        placeholder="{{'cardManagement.month/year' | translate}}" formControlName="expiry"
                                        (input)="setExpiry($event.target.value)">
                                </div>
                                <div class="text-left">
                                    <ng-container
                                        *ngIf="expiryErrorMessage == true">
                                        <span class="error-message font-14">{{'cardFormErrors.expiry' | translate}}</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label for="cvv">{{'cardManagement.cvv' | translate}}</label>
                                <div class="input-group input-group-alternative">
                                    <input type="password" class="form-control"  autocomplete="new-password"
                                        placeholder="123" formControlName="cvv"
                                        (input)="setCvv($event.target.value)">
                                </div>
                                <div class="text-left">
                                    <ng-container
                                        *ngIf="cvvErrorMessage == true">
                                        <span class="error-message font-14">{{'cardFormErrors.cvv' | translate}}</span>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>

                </form>
 
                <div class="text-capitalize">
                    <ng-container *ngIf="displayMessage!=null">
                        <span class="error-message font-14">{{displayMessage}}</span>
                    </ng-container>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <button class="btn btn-theme btn-grey text-capitalize" (click)="closeModal()">
                        {{'userManagement.cancel' | translate}}
                    </button>
                    <button type="submit" class="btn btn-theme btn-blue text-capitalize" (click)="onSubmit()">
                        <span class="text-capitalize" *ngIf="!loading && !restaurantData.id">{{'cardManagement.add' |
                            translate}}</span>
                        <span class="spinner-border spinner-border-sm" *ngIf="loading" role="status"
                            aria-hidden="true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</ng-container>